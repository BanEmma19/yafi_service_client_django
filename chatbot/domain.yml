version: "3.1"

intents:
  - salutation
  - donner_email
  - passer_commande
  - mode_paiement
  - suivi_commande
  - annulation_commande
  - problème_paiement
  - délai_livraison
  - contacter_livreur
  - disponibilité_service
  - devenir_partenaire
  - commande_mauvais_etat
  - double_facturation
  - compte_suspendu
  - commande_non_livree
  - remboursement

entities:
  - numero_commande
  - email_utilisateur
  - photo_produit
  - details_probleme
  - photo_double_transaction
  - adresse_livraison
  - disponibilite_nouvelle_livraison
  - photo_transaction

slots:
  numero_commande:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: remboursement_form
          - active_loop: commande_mauvais_etat_form
          - active_loop: double_facturation_form
          - active_loop: commande_non_livree_form
    influence_conversation: true

  email_utilisateur:
    type: text
    mappings:
      - type: from_entity
        entity: email_utilisateur
        conditions:
          - active_loop: compte_suspendu_form
    influence_conversation: true

  photo_double_transaction:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: double_facturation_form
    influence_conversation: true

  photo_transaction:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: remboursement_form
    influence_conversation: true

  photo_produit:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: commande_mauvais_etat_form
    influence_conversation: true

  details_probleme:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: remboursement_form
          - active_loop: commande_mauvais_etat_form
    influence_conversation: true

  adresse_livraison:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: commande_non_livree_form
    influence_conversation: true

  disponibilite_nouvelle_livraison:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: commande_non_livree_form
    influence_conversation: true

forms:
  remboursement_form:
    required_slots:
      - numero_commande
      - details_probleme
      - photo_transaction

  commande_mauvais_etat_form:
    required_slots:
      - numero_commande
      - photo_produit
      - details_probleme

  double_facturation_form:
    required_slots:
      - numero_commande
      - photo_double_transaction

  commande_non_livree_form:
    required_slots:
      - numero_commande
      - adresse_livraison
      - disponibilite_nouvelle_livraison

  compte_suspendu_form:
    required_slots:
      - email_utilisateur
    ignored_intents:
      - salutation

actions:
  - validate_remboursement_form
  - validate_commande_mauvais_etat_form
  - validate_double_facturation_form
  - validate_commande_non_livree_form
  - validate_compte_suspendu_form
  - action_commande_mauvais_etat
  - action_facturation_double
  - action_compte_suspendu
  - action_commande_non_livree
  - action_remboursement


responses:
  utter_salutation:
      - text: "Bonjour ! Comment puis-je vous aider aujourd’hui ?"

  utter_passer_commande:
    - text: "Pour passer une commande :\n1. Ouvrez l’application YaFi\n2. Sélectionnez un restaurant\n3. Ajoutez vos plats au panier\n4. Validez l’adresse de livraison\n5. Procédez au paiement"

  utter_mode_paiement:
    - text: "Nous acceptons :\n- MTN Mobile Money\n- Orange Money\n- Paiement en espèces à la livraison"

  utter_suivi_commande:
    - text: "Pour suivre votre commande :\n1. Allez dans 'Historique des commandes'\n2. Sélectionnez la commande en cours\n3. Vous verrez le statut en temps réel"

  utter_annulation_commande:
    - text: "Malheureusement, une commande confirmée ne peut plus être annulée. Si vous rencontrez un problème, contactez notre support."

  utter_problème_paiement:
    - text: "Pour résoudre un problème de paiement :\n1. Vérifiez votre historique de commandes\n2. Si la commande n’apparaît pas, contactez-nous via le chat\n3. Préparez votre numéro de transaction"

  utter_délai_livraison:
    - text: "Délais moyens :\n- Plats chauds : 30-45 min\n- Supermarché : 45-60 min\nVous pouvez suivre en direct dans l’application"

  utter_contacter_livreur:
    - text: "Une fois votre commande prise en charge :\n1. Allez dans 'Suivi de commande'\n2. Cliquez sur 'Contacter le livreur'\n3. Choisissez appel ou message"

  utter_disponibilité_service:
    - text: "Nos services sont disponibles :\n- Du lundi au dimanche\n- De 8h à 19h"

  utter_devenir_partenaire:
    - text: "Pour devenir partenaire :\n1. Remplissez le formulaire sur yafiapp.com/partenaires\n2. Ou contactez notre équipe au 683 611 329\n3. Ou par mail : infos@yafiapp.com"

  utter_ask_numero_commande:
    - text: "Quel est le numéro de votre commande ?"

  utter_ask_photo_produit:
    - text: "Pouvez-vous envoyer une photo du produit concerné ?"

  utter_ask_details_probleme:
    - text: "Pouvez-vous décrire le problème rencontré avec votre commande ?"

  utter_ask_photo_double_transaction:
    - text: "Pouvez-vous nous envoyer une photo montrant la double transaction ?"

  utter_ask_adresse_livraison:
    - text: "Pouvez-vous confirmer l'adresse de livraison prévue pour cette commande ?"

  utter_ask_disponibilite_nouvelle_livraison:
    - text: "Souhaitez-vous une nouvelle tentative de livraison ? Si oui, à quel moment ?"

  utter_ask_email_utilisateur:
    - text: "Veuillez fournir votre adresse email."

  utter_ask_photo_transaction:
    - text: "Pouvez-vous nous envoyer une preuve de transaction pour le remboursement ?"

  utter_confirm_signalement:
    - text: "Merci, nous avons bien reçu votre signalement. Notre équipe va examiner votre demande."

  utter_confirm_double_facturation:
    - text: "Merci, nous avons bien reçu votre demande de vérification de double facturation."

  utter_confirm_commande_non_livree:
    - text: "Merci pour ces informations. Nous allons vérifier avec le livreur et revenir vers vous rapidement."

  utter_confirm_remboursement:
    - text: "Nous avons bien reçu votre demande de remboursement et la traitons actuellement."

  utter_confirm_compte_suspendu:
    - text: "Nous avons bien reçu votre requête pour un problème de compte. Notre équipe vous contactera bientôt."

  utter_formulaire_encours:
    - text: "Merci de continuer la procédure. Veuillez fournir une adresse email valide."

  utter_email_invalide:
    - text: "Format d'email invalide. Exemple : nom@domaine.com"

  utter_demande_reeemail:
    - text: "Veuillez saisir à nouveau votre email"


session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
